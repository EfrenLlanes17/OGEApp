@page "/map"
@rendermode InteractiveServer

<PageTitle>map</PageTitle>




@* Hot Points turned on *@
@if(hotPoints){

    if(hotPoints){
         panels = false;
        readers = false;
        maintenance  = false;

    }

<div style="display: flex; flex-direction: column; align-items: center; margin-top: 1.5%;">
    
    
    <div style="width: 60%; display: flex; justify-content: space-between; margin-bottom: 5px; margin-right: 5%; font-size: 14px;">
        <span style="font-weight: bold;">Most Active</span>
        <span style="font-weight: bold; margin-right: 75%;">Least Active</span>
    </div>

    
    <div style="display: flex; align-items: center; width: 65%; gap: 20px; margin-right: 0%">
        @* Gradient Bar *@

        
        <div style="
            flex: 1;
            height: 20px;
            border-radius: 10px;
            background: linear-gradient(90deg, red, orange, yellow, green, blue);
            box-shadow: 0 0 5px rgba(0,0,0,0.2);
        ">
        </div>

        


        
<div style="margin-left: 38%; ">
        @* Checkboxes*@
        <label class="custom-checkbox panels-color" style="margin-right: 10px;">
            <input type="checkbox" @bind="panels" />Panels  
        </label>

        <label class="custom-checkbox readers-color" style="margin-right: 10px;">
            <input type="checkbox" @bind="readers" />Readers  
        </label>

         <label class="custom-checkbox main-color" style="margin-right: 10px;">
            <input type="checkbox" @bind="maintenance" />Maintenance  
        </label>

        <label class="custom-checkbox hotpoints-color">
            <input type="checkbox" @bind="hotPoints" />Hot Points  
        </label>

        </div>
    </div>
</div>





// Welding Area
<i class="fas fa-pager"
   @onclick="() => OnPanelClick(39)"
   style="
       position: absolute;
       top: 210px;
       left: 795px;
       color: @scansToColorPanel(39);
       font-size: 42px;
       z-index: 10;">
</i>

// Storage Room
<i class="fas fa-pager"
   @onclick="() => OnPanelClick(34)"
   style="
       position: absolute;
       top: 560px;
       left: 350px;
       color: @scansToColorPanel(34);
       font-size: 42px;
       z-index: 10;">
</i>

// CEM BLGD #1
<i class="fas fa-pager"
   @onclick="() => OnPanelClick(285)"
   style="
       position: absolute;
       top: 510px;
       left: 820px;
       color: @scansToColorPanel(285);
       font-size: 42px;
       z-index: 10;">
</i>

// CEM BLGD #2
<i class="fas fa-pager"
   @onclick="() => OnPanelClick(286)"
   style="
       position: absolute;
       top: 545px;
       left: 800px;
       color: @scansToColorPanel(286);
       font-size: 42px;
       z-index: 10;">
</i>

// Tank Farm
<i class="fas fa-pager"
   @onclick="() => OnPanelClick(322)"
   style="
       position: absolute;
       top: 425px;
       left: 1000px;
       color: @scansToColorPanel(322);
       font-size: 42px;
       z-index: 10;">
</i>

// Cntrl Rm
<i class="fas fa-pager"
   @onclick="() => OnPanelClick(182)"
   style="
       position: absolute;
       top: 480px;
       left: 960px;
       color: @scansToColorPanel(182);
       font-size: 42px;
       z-index: 10;">
</i>

// Load Doc
<i class="fas fa-pager"
   @onclick="() => OnPanelClick(323)"
   style="
       position: absolute;
       top: 450px;
       left: 1100px;
       color: @scansToColorPanel(323);
       font-size: 42px;
       z-index: 10;">
</i>

// Main Gate
<i class="fas fa-pager"
   @onclick="() => OnPanelClick(25)"
   style="
       position: absolute;
       top: 500px;
       left: 1100px;
       color: @scansToColorPanel(25);
       font-size: 42px;
       z-index: 10;">
</i>

// Admin
<i class="fas fa-pager"
   @onclick="() => OnPanelClick(274)"
   style="
       position: absolute;
       top: 240px;
       left: 1310px;
       color: @scansToColorPanel(274);
       font-size: 42px;
       z-index: 10;">
</i>

// CEM BLGD #3
<i class="fas fa-pager"
   @onclick="() => OnPanelClick(287)"
   style="
       position: absolute;
       top: 470px;
       left: 1280px;
       color: @scansToColorPanel(287);
       font-size: 42px;
       z-index: 10;">
</i>





    //Storage Room
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 123 STORE ROOM"))"
    style="position: absolute; top: 560px; left: 370px; color: @scansToColorReader("DOOR TESTING FACILITY 123 STORE ROOM"); font-size: 42px; z-index: 10;">
    </i>

    //CEM BLGD #1
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 132 CEM BLGD #1 DR"))"
    style="position: absolute; top: 510px; left: 790px; color: @scansToColorReader("DOOR TESTING FACILITY 132 CEM BLGD #1 DR"); font-size: 42px; z-index: 10;">
    </i>

    //CEM BLGD #2
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 133 CEM BLGD #2 DR"))"
    style="position: absolute; top: 545px; left: 830px; color: @scansToColorReader("DOOR TESTING FACILITY 133 CEM BLGD #2 DR"); font-size: 42px; z-index: 10;">
    </i>

    //CEM BLGD #3
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 134 CEM BLGD #3 DR"))"
    style="position: absolute; top: 470px; left: 1250px; color: @scansToColorReader("DOOR TESTING FACILITY 134 CEM BLGD #3 DR"); font-size: 42px; z-index: 10;">
    </i>

    //Tank Farm
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 117 TANK FARM ENTR"))"
    style="position: absolute; top: 405px; left: 1025px; color: @scansToColorReader("DOOR TESTING FACILITY 117 TANK FARM ENTR"); font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 118 TANK FARM EXIT"))"
    style="position: absolute; top: 440px; left: 1030px; color: @scansToColorReader("DOOR TESTING FACILITY 118 TANK FARM EXIT"); font-size: 42px; z-index: 10;">
    </i>

    //Load Doc
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 116 LOAD DOC ENTR"))"
    style="position: absolute; top: 410px; left: 1100px; color: @scansToColorReader("DOOR TESTING FACILITY 116 LOAD DOC ENTR"); font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 115 LOAD DOC EXIT"))"
    style="position: absolute; top: 420px; left: 1070px; color: @scansToColorReader("DOOR TESTING FACILITY 115 LOAD DOC EXIT"); font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 141-E Contractor Turnstile ENT"))"
    style="position: absolute; top: 450px; left: 1150px; color: @scansToColorReader("DOOR TESTING FACILITY 141-E Contractor Turnstile ENT"); font-size: 42px; z-index: 10;">
    </i>

    //Admin
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 112 ADMIN ADA ENTRY"))"
    style="position: absolute; top: 250px; left: 1230px; color: @scansToColorReader("DOOR TESTING FACILITY 112 ADMIN ADA ENTRY"); font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 111 ADMIN ADA EXIT"))"
    style="position: absolute; top: 210px; left: 1230px; color: @scansToColorReader("DOOR TESTING FACILITY 111 ADMIN ADA EXIT"); font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 108 ADMIN GATE ENTRY LOWER"))"
    style="position: absolute; top: 280px; left: 1310px; color: @scansToColorReader("DOOR TESTING FACILITY 108 ADMIN GATE ENTRY LOWER"); font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 108-E ADMIN GATE ENTRY UPPER"))"
    style="position: absolute; top: 250px; left: 1400px; color: @scansToColorReader("DOOR TESTING FACILITY 108-E ADMIN GATE ENTRY UPPER"); font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 107 ADMIN GATE EXIT LOWER"))"
    style="position: absolute; top: 210px; left: 1400px; color: @scansToColorReader("DOOR TESTING FACILITY 107 ADMIN GATE EXIT LOWER"); font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 109 ADMIN TURN EXIT"))"
    style="position: absolute; top: 200px; left: 1310px; color: @scansToColorReader("DOOR TESTING FACILITY 109 ADMIN TURN EXIT"); font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 110 ADMIN TURN ENTRY"))"
    style="position: absolute; top: 240px; left: 1270px; color: @scansToColorReader("DOOR TESTING FACILITY 110 ADMIN TURN ENTRY"); font-size: 42px; z-index: 10;">
    </i>

    //Cntrl Rm
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 105 CNTRL RM SW DR"))"
    style="position: absolute; top: 520px; left: 960px; color: @scansToColorReader("DOOR TESTING FACILITY 105 CNTRL RM SW DR"); font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 119 CNTRL RM NW DR"))"
    style="position: absolute; top: 520px; left: 1040px; color: @scansToColorReader("DOOR TESTING FACILITY 119 CNTRL RM NW DR"); font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 121 DATA RM SW DR"))"
    style="position: absolute; top: 520px; left: 1000px; color: @scansToColorReader("DOOR TESTING FACILITY 121 DATA RM SW DR"); font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 122 DATA RM NW DR"))"
    style="position: absolute; top: 520px; left: 920px; color: @scansToColorReader("DOOR TESTING FACILITY 122 DATA RM NW DR"); font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 120 CNTRL RM NE DR"))"
    style="position: absolute; top: 510px; left: 890px; color: @scansToColorReader("DOOR TESTING FACILITY 120 CNTRL RM NE DR"); font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 106 CNTRL RM SE DR"))"
    style="position: absolute; top: 470px; left: 890px; color: @scansToColorReader("DOOR TESTING FACILITY 106 CNTRL RM SE DR"); font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 105-E CNTRL RM SW DR"))"
    style="position: absolute; top: 440px; left: 960px; color: @scansToColorReader("DOOR TESTING FACILITY 105-E CNTRL RM SW DR"); font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 119-E CNTRL RM NW DR"))"
    style="position: absolute; top: 400px; left: 950px; color: @scansToColorReader("DOOR TESTING FACILITY 119-E CNTRL RM NW DR"); font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 121-E DATA RM SW RD"))"
    style="position: absolute; top: 390px; left: 900px; color: @scansToColorReader("DOOR TESTING FACILITY 121-E DATA RM SW RD"); font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 120-E CNTRL RM NE DR"))"
    style="position: absolute; top: 420px; left: 880px; color: @scansToColorReader("DOOR TESTING FACILITY 120-E CNTRL RM NE DR"); font-size: 42px; z-index: 10;">
    </i>

    //Main Gate
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 102 MAIN GATE ENTRY LOWER"))"
    style="position: absolute; top: 520px; left: 1075px; color: @scansToColorReader("DOOR TESTING FACILITY 102 MAIN GATE ENTRY LOWER"); font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 101 GUARD SHACK PLANT ENTRY"))"
    style="position: absolute; top: 520px; left: 1125px; color: @scansToColorReader("DOOR TESTING FACILITY 101 GUARD SHACK PLANT ENTRY"); font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 103 MAIN GATE EXIT LOWER"))"
    style="position: absolute; top: 510px; left: 1160px; color: @scansToColorReader("DOOR TESTING FACILITY 103 MAIN GATE EXIT LOWER"); font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 100 GUARD SHACK PUBLIC ENTRY"))"
    style="position: absolute; top: 480px; left: 1190px; color: @scansToColorReader("DOOR TESTING FACILITY 100 GUARD SHACK PUBLIC ENTRY"); font-size: 42px; z-index: 10;">
    </i>

//Welding Area
<i class="fas fa-map-marker-alt"
   @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 125 WELDING OFFICE"))"
   style="position: absolute; top: 205px; left: 755px; color: @scansToColorReader("DOOR TESTING FACILITY 125 WELDING OFFICE"); font-size: 42px; z-index: 10;">
</i>

<i class="fas fa-map-marker-alt"
   @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 124 WELDING AREA"))"
   style="position: absolute; top: 250px; left: 795px; color: @scansToColorReader("DOOR TESTING FACILITY 124 WELDING AREA"); font-size: 42px; z-index: 10;">
</i>

<i class="fas fa-map-marker-alt"
   @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 124-E WELDING AREA"))"
   style="position: absolute; top: 210px; left: 830px; color: @scansToColorReader("DOOR TESTING FACILITY 124-E WELDING AREA"); font-size: 42px; z-index: 10;">
</i>

<i class="fas fa-map-marker-alt"
   @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 125-E WELDING OFFICE"))"
   style="position: absolute; top: 250px; left: 755px; color: @scansToColorReader("DOOR TESTING FACILITY 125-E WELDING OFFICE"); font-size: 42px; z-index: 10;">
</i>

}

else{
           
<div style="margin-left: 58.235%; margin-top: 2.92%;">
        <!-- Checkboxes -->
        <label class="custom-checkbox panels-color" style="margin-right: 10px;">
            <input type="checkbox" @bind="panels" />Panels  
        </label>

        <label class="custom-checkbox readers-color" style="margin-right: 10px;">
            <input type="checkbox" @bind="readers" />Readers  
        </label>

        <label class="custom-checkbox main-color" style="margin-right: 10px;">
            <input type="checkbox" @bind="maintenance" />Maintenance  
        </label>

        <label class="custom-checkbox hotpoints-color">
            <input type="checkbox" @bind="hotPoints" />Hot Points  
        </label>

        </div>
    


}
@* Maintence Turned on*@
@if(maintenance){

if(maintenance){
         panels = false;
        readers = false;
        hotPoints  = false;

    }


// Welding Area
<i class="fas fa-pager"
   @onclick="() => OnPanelClick(39)"
   style="
       position: absolute;
       top: 210px;
       left: 795px;
       color: @scansToColorPanelMaintenance(39);
       font-size: 42px;
       z-index: 10;">
</i>

// Storage Room
<i class="fas fa-pager"
   @onclick="() => OnPanelClick(34)"
   style="
       position: absolute;
       top: 560px;
       left: 350px;
       color: @scansToColorPanelMaintenance(34);
       font-size: 42px;
       z-index: 10;">
</i>

// CEM BLGD #1
<i class="fas fa-pager"
   @onclick="() => OnPanelClick(285)"
   style="
       position: absolute;
       top: 510px;
       left: 820px;
       color: @scansToColorPanelMaintenance(285);
       font-size: 42px;
       z-index: 10;">
</i>

// CEM BLGD #2
<i class="fas fa-pager"
   @onclick="() => OnPanelClick(286)"
   style="
       position: absolute;
       top: 545px;
       left: 800px;
       color: @scansToColorPanelMaintenance(286);
       font-size: 42px;
       z-index: 10;">
</i>

// Tank Farm
<i class="fas fa-pager"
   @onclick="() => OnPanelClick(322)"
   style="
       position: absolute;
       top: 425px;
       left: 1000px;
       color: @scansToColorPanelMaintenance(322);
       font-size: 42px;
       z-index: 10;">
</i>

// Cntrl Rm
<i class="fas fa-pager"
   @onclick="() => OnPanelClick(182)"
   style="
       position: absolute;
       top: 480px;
       left: 960px;
       color: @scansToColorPanelMaintenance(182);
       font-size: 42px;
       z-index: 10;">
</i>

// Load Doc
<i class="fas fa-pager"
   @onclick="() => OnPanelClick(323)"
   style="
       position: absolute;
       top: 450px;
       left: 1100px;
       color: @scansToColorPanelMaintenance(323);
       font-size: 42px;
       z-index: 10;">
</i>

// Main Gate
<i class="fas fa-pager"
   @onclick="() => OnPanelClick(25)"
   style="
       position: absolute;
       top: 500px;
       left: 1100px;
       color: @scansToColorPanelMaintenance(25);
       font-size: 42px;
       z-index: 10;">
</i>

// Admin
<i class="fas fa-pager"
   @onclick="() => OnPanelClick(274)"
   style="
       position: absolute;
       top: 240px;
       left: 1310px;
       color: @scansToColorPanelMaintenance(274);
       font-size: 42px;
       z-index: 10;">
</i>

// CEM BLGD #3
<i class="fas fa-pager"
   @onclick="() => OnPanelClick(287)"
   style="
       position: absolute;
       top: 470px;
       left: 1280px;
       color: @scansToColorPanelMaintenance(287);
       font-size: 42px;
       z-index: 10;">
</i>





    //Storage Room
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 123 STORE ROOM"))"
    style="position: absolute; top: 560px; left: 370px; color: @scansToColorReaderMaintenance("DOOR TESTING FACILITY 123 STORE ROOM"); font-size: 42px; z-index: 10;">
    </i>

    //CEM BLGD #1
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 132 CEM BLGD #1 DR"))"
    style="position: absolute; top: 510px; left: 790px; color: @scansToColorReaderMaintenance("DOOR TESTING FACILITY 132 CEM BLGD #1 DR"); font-size: 42px; z-index: 10;">
    </i>

    //CEM BLGD #2
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 133 CEM BLGD #2 DR"))"
    style="position: absolute; top: 545px; left: 830px; color: @scansToColorReaderMaintenance("DOOR TESTING FACILITY 133 CEM BLGD #2 DR"); font-size: 42px; z-index: 10;">
    </i>

    //CEM BLGD #3
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 134 CEM BLGD #3 DR"))"
    style="position: absolute; top: 470px; left: 1250px; color: @scansToColorReaderMaintenance("DOOR TESTING FACILITY 134 CEM BLGD #3 DR"); font-size: 42px; z-index: 10;">
    </i>

    //Tank Farm
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 117 TANK FARM ENTR"))"
    style="position: absolute; top: 405px; left: 1025px; color: @scansToColorReaderMaintenance("DOOR TESTING FACILITY 117 TANK FARM ENTR"); font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 118 TANK FARM EXIT"))"
    style="position: absolute; top: 440px; left: 1030px; color: @scansToColorReaderMaintenance("DOOR TESTING FACILITY 118 TANK FARM EXIT"); font-size: 42px; z-index: 10;">
    </i>

    //Load Doc
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 116 LOAD DOC ENTR"))"
    style="position: absolute; top: 410px; left: 1100px; color: @scansToColorReaderMaintenance("DOOR TESTING FACILITY 116 LOAD DOC ENTR"); font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 115 LOAD DOC EXIT"))"
    style="position: absolute; top: 420px; left: 1070px; color: @scansToColorReaderMaintenance("DOOR TESTING FACILITY 115 LOAD DOC EXIT"); font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 141-E Contractor Turnstile ENT"))"
    style="position: absolute; top: 450px; left: 1150px; color: @scansToColorReaderMaintenance("DOOR TESTING FACILITY 141-E Contractor Turnstile ENT"); font-size: 42px; z-index: 10;">
    </i>

    //Admin
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 112 ADMIN ADA ENTRY"))"
    style="position: absolute; top: 250px; left: 1230px; color: @scansToColorReaderMaintenance("DOOR TESTING FACILITY 112 ADMIN ADA ENTRY"); font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 111 ADMIN ADA EXIT"))"
    style="position: absolute; top: 210px; left: 1230px; color: @scansToColorReaderMaintenance("DOOR TESTING FACILITY 111 ADMIN ADA EXIT"); font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 108 ADMIN GATE ENTRY LOWER"))"
    style="position: absolute; top: 280px; left: 1310px; color: @scansToColorReaderMaintenance("DOOR TESTING FACILITY 108 ADMIN GATE ENTRY LOWER"); font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 108-E ADMIN GATE ENTRY UPPER"))"
    style="position: absolute; top: 250px; left: 1400px; color: @scansToColorReaderMaintenance("DOOR TESTING FACILITY 108-E ADMIN GATE ENTRY UPPER"); font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 107 ADMIN GATE EXIT LOWER"))"
    style="position: absolute; top: 210px; left: 1400px; color: @scansToColorReaderMaintenance("DOOR TESTING FACILITY 107 ADMIN GATE EXIT LOWER"); font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 109 ADMIN TURN EXIT"))"
    style="position: absolute; top: 200px; left: 1310px; color: @scansToColorReaderMaintenance("DOOR TESTING FACILITY 109 ADMIN TURN EXIT"); font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 110 ADMIN TURN ENTRY"))"
    style="position: absolute; top: 240px; left: 1270px; color: @scansToColorReaderMaintenance("DOOR TESTING FACILITY 110 ADMIN TURN ENTRY"); font-size: 42px; z-index: 10;">
    </i>

    //Cntrl Rm
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 105 CNTRL RM SW DR"))"
    style="position: absolute; top: 520px; left: 960px; color: @scansToColorReaderMaintenance("DOOR TESTING FACILITY 105 CNTRL RM SW DR"); font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 119 CNTRL RM NW DR"))"
    style="position: absolute; top: 520px; left: 1040px; color: @scansToColorReaderMaintenance("DOOR TESTING FACILITY 119 CNTRL RM NW DR"); font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 121 DATA RM SW DR"))"
    style="position: absolute; top: 520px; left: 1000px; color: @scansToColorReaderMaintenance("DOOR TESTING FACILITY 121 DATA RM SW DR"); font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 122 DATA RM NW DR"))"
    style="position: absolute; top: 520px; left: 920px; color: @scansToColorReaderMaintenance("DOOR TESTING FACILITY 122 DATA RM NW DR"); font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 120 CNTRL RM NE DR"))"
    style="position: absolute; top: 510px; left: 890px; color: @scansToColorReaderMaintenance("DOOR TESTING FACILITY 120 CNTRL RM NE DR"); font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 106 CNTRL RM SE DR"))"
    style="position: absolute; top: 470px; left: 890px; color: @scansToColorReaderMaintenance("DOOR TESTING FACILITY 106 CNTRL RM SE DR"); font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 105-E CNTRL RM SW DR"))"
    style="position: absolute; top: 440px; left: 960px; color: @scansToColorReaderMaintenance("DOOR TESTING FACILITY 105-E CNTRL RM SW DR"); font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 119-E CNTRL RM NW DR"))"
    style="position: absolute; top: 400px; left: 950px; color: @scansToColorReaderMaintenance("DOOR TESTING FACILITY 119-E CNTRL RM NW DR"); font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 121-E DATA RM SW RD"))"
    style="position: absolute; top: 390px; left: 900px; color: @scansToColorReaderMaintenance("DOOR TESTING FACILITY 121-E DATA RM SW RD"); font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 120-E CNTRL RM NE DR"))"
    style="position: absolute; top: 420px; left: 880px; color: @scansToColorReaderMaintenance("DOOR TESTING FACILITY 120-E CNTRL RM NE DR"); font-size: 42px; z-index: 10;">
    </i>

    //Main Gate
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 102 MAIN GATE ENTRY LOWER"))"
    style="position: absolute; top: 520px; left: 1075px; color: @scansToColorReaderMaintenance("DOOR TESTING FACILITY 102 MAIN GATE ENTRY LOWER"); font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 101 GUARD SHACK PLANT ENTRY"))"
    style="position: absolute; top: 520px; left: 1125px; color: @scansToColorReaderMaintenance("DOOR TESTING FACILITY 101 GUARD SHACK PLANT ENTRY"); font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 103 MAIN GATE EXIT LOWER"))"
    style="position: absolute; top: 510px; left: 1160px; color: @scansToColorReaderMaintenance("DOOR TESTING FACILITY 103 MAIN GATE EXIT LOWER"); font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 100 GUARD SHACK PUBLIC ENTRY"))"
    style="position: absolute; top: 480px; left: 1190px; color: @scansToColorReaderMaintenance("DOOR TESTING FACILITY 100 GUARD SHACK PUBLIC ENTRY"); font-size: 42px; z-index: 10;">
    </i>

//Welding Area
<i class="fas fa-map-marker-alt"
   @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 125 WELDING OFFICE"))"
   style="position: absolute; top: 205px; left: 755px; color: @scansToColorReaderMaintenance("DOOR TESTING FACILITY 125 WELDING OFFICE"); font-size: 42px; z-index: 10;">
</i>

<i class="fas fa-map-marker-alt"
   @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 124 WELDING AREA"))"
   style="position: absolute; top: 250px; left: 795px; color: @scansToColorReaderMaintenance("DOOR TESTING FACILITY 124 WELDING AREA"); font-size: 42px; z-index: 10;">
</i>

<i class="fas fa-map-marker-alt"
   @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 124-E WELDING AREA"))"
   style="position: absolute; top: 210px; left: 830px; color: @scansToColorReaderMaintenance("DOOR TESTING FACILITY 124-E WELDING AREA"); font-size: 42px; z-index: 10;">
</i>

<i class="fas fa-map-marker-alt"
   @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 125-E WELDING OFFICE"))"
   style="position: absolute; top: 250px; left: 755px; color: @scansToColorReaderMaintenance("DOOR TESTING FACILITY 125-E WELDING OFFICE"); font-size: 42px; z-index: 10;">
</i>
}


@* Panels turned on*@
@if(panels){
// Welding Area
<i class="fas fa-pager"
   @onclick="() => OnPanelClick(39)"
   style="
       position: absolute;
       top: 210px;
       left: 795px;
       color: orange;
       font-size: 42px;
       z-index: 10;">
</i>

// Storage Room
<i class="fas fa-pager"
   @onclick="() => OnPanelClick(34)"
   style="
       position: absolute;
       top: 560px;
       left: 350px;
       color: orange;
       font-size: 42px;
       z-index: 10;">
</i>

// CEM BLGD #1
<i class="fas fa-pager"
   @onclick="() => OnPanelClick(285)"
   style="
       position: absolute;
       top: 510px;
       left: 820px;
       color: orange;
       font-size: 42px;
       z-index: 10;">
</i>

// CEM BLGD #2
<i class="fas fa-pager"
   @onclick="() => OnPanelClick(286)"
   style="
       position: absolute;
       top: 545px;
       left: 800px;
       color: orange;
       font-size: 42px;
       z-index: 10;">
</i>

// Tank Farm
<i class="fas fa-pager"
   @onclick="() => OnPanelClick(322)"
   style="
       position: absolute;
       top: 425px;
       left: 1000px;
       color: orange;
       font-size: 42px;
       z-index: 10;">
</i>

// Cntrl Rm
<i class="fas fa-pager"
   @onclick="() => OnPanelClick(182)"
   style="
       position: absolute;
       top: 480px;
       left: 960px;
       color: orange;
       font-size: 42px;
       z-index: 10;">
</i>

// Load Doc
<i class="fas fa-pager"
   @onclick="() => OnPanelClick(323)"
   style="
       position: absolute;
       top: 450px;
       left: 1100px;
       color: orange;
       font-size: 42px;
       z-index: 10;">
</i>

// Main Gate
<i class="fas fa-pager"
   @onclick="() => OnPanelClick(25)"
   style="
       position: absolute;
       top: 500px;
       left: 1100px;
       color: orange;
       font-size: 42px;
       z-index: 10;">
</i>

// Admin
<i class="fas fa-pager"
   @onclick="() => OnPanelClick(274)"
   style="
       position: absolute;
       top: 240px;
       left: 1310px;
       color: orange;
       font-size: 42px;
       z-index: 10;">
</i>

// CEM BLGD #3
<i class="fas fa-pager"
   @onclick="() => OnPanelClick(287)"
   style="
       position: absolute;
       top: 470px;
       left: 1280px;
       color: orange;
       font-size: 42px;
       z-index: 10;">
</i>


}

@*Readers turned on*@
@if(readers){

    //Storage Room
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 123 STORE ROOM"))"
    style="position: absolute; top: 560px; left: 370px; color: purple; font-size: 42px; z-index: 10;">
    </i>

    //CEM BLGD #1
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 132 CEM BLGD #1 DR"))"
    style="position: absolute; top: 510px; left: 790px; color: purple; font-size: 42px; z-index: 10;">
    </i>

    //CEM BLGD #2
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 133 CEM BLGD #2 DR"))"
    style="position: absolute; top: 545px; left: 830px; color: purple; font-size: 42px; z-index: 10;">
    </i>

    //CEM BLGD #3
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 134 CEM BLGD #3 DR"))"
    style="position: absolute; top: 470px; left: 1250px; color: purple; font-size: 42px; z-index: 10;">
    </i>

    //Tank Farm
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 117 TANK FARM ENTR"))"
    style="position: absolute; top: 405px; left: 1025px; color: purple; font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 118 TANK FARM EXIT"))"
    style="position: absolute; top: 440px; left: 1030px; color: purple; font-size: 42px; z-index: 10;">
    </i>

    //Load Doc
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 116 LOAD DOC ENTR"))"
    style="position: absolute; top: 410px; left: 1100px; color: purple; font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 115 LOAD DOC EXIT"))"
    style="position: absolute; top: 420px; left: 1070px; color: purple; font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 141-E Contractor Turnstile ENT"))"
    style="position: absolute; top: 450px; left: 1150px; color: purple; font-size: 42px; z-index: 10;">
    </i>

    //Admin
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 112 ADMIN ADA ENTRY"))"
    style="position: absolute; top: 250px; left: 1230px; color: purple; font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 111 ADMIN ADA EXIT"))"
    style="position: absolute; top: 210px; left: 1230px; color: purple; font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 108 ADMIN GATE ENTRY LOWER"))"
    style="position: absolute; top: 280px; left: 1310px; color: purple; font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 108-E ADMIN GATE ENTRY UPPER"))"
    style="position: absolute; top: 250px; left: 1400px; color: purple; font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 107 ADMIN GATE EXIT LOWER"))"
    style="position: absolute; top: 210px; left: 1400px; color: purple; font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 109 ADMIN TURN EXIT"))"
    style="position: absolute; top: 200px; left: 1310px; color: purple; font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 110 ADMIN TURN ENTRY"))"
    style="position: absolute; top: 240px; left: 1270px; color: purple; font-size: 42px; z-index: 10;">
    </i>

    //Cntrl Rm
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 105 CNTRL RM SW DR"))"
    style="position: absolute; top: 520px; left: 960px; color: purple; font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 119 CNTRL RM NW DR"))"
    style="position: absolute; top: 520px; left: 1040px; color: purple; font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 121 DATA RM SW DR"))"
    style="position: absolute; top: 520px; left: 1000px; color: purple; font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 122 DATA RM NW DR"))"
    style="position: absolute; top: 520px; left: 920px; color: purple; font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 120 CNTRL RM NE DR"))"
    style="position: absolute; top: 510px; left: 890px; color: purple; font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 106 CNTRL RM SE DR"))"
    style="position: absolute; top: 470px; left: 890px; color: purple; font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 105-E CNTRL RM SW DR"))"
    style="position: absolute; top: 440px; left: 960px; color: purple; font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 119-E CNTRL RM NW DR"))"
    style="position: absolute; top: 400px; left: 950px; color: purple; font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 121-E DATA RM SW RD"))"
    style="position: absolute; top: 390px; left: 900px; color: purple; font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 120-E CNTRL RM NE DR"))"
    style="position: absolute; top: 420px; left: 880px; color: purple; font-size: 42px; z-index: 10;">
    </i>

    //Main Gate
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 102 MAIN GATE ENTRY LOWER"))"
    style="position: absolute; top: 520px; left: 1075px; color: purple; font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 101 GUARD SHACK PLANT ENTRY"))"
    style="position: absolute; top: 520px; left: 1125px; color: purple; font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 103 MAIN GATE EXIT LOWER"))"
    style="position: absolute; top: 510px; left: 1160px; color: purple; font-size: 42px; z-index: 10;">
    </i>
    <i class="fas fa-map-marker-alt"
    @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 100 GUARD SHACK PUBLIC ENTRY"))"
    style="position: absolute; top: 480px; left: 1190px; color: purple; font-size: 42px; z-index: 10;">
    </i>

//Welding Area
<i class="fas fa-map-marker-alt"
   @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 125 WELDING OFFICE"))"
   style="position: absolute; top: 205px; left: 755px; color: purple; font-size: 42px; z-index: 10;">
</i>

<i class="fas fa-map-marker-alt"
   @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 124 WELDING AREA"))"
   style="position: absolute; top: 250px; left: 795px; color: purple; font-size: 42px; z-index: 10;">
</i>

<i class="fas fa-map-marker-alt"
   @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 124-E WELDING AREA"))"
   style="position: absolute; top: 210px; left: 830px; color: purple; font-size: 42px; z-index: 10;">
</i>

<i class="fas fa-map-marker-alt"
   @onclick="@(() => HandleButtonClick("DOOR TESTING FACILITY 125-E WELDING OFFICE"))"
   style="position: absolute; top: 250px; left: 755px; color: purple; font-size: 42px; z-index: 10;">
</i>





}

@* Panel clicked pop up*@
@if (IsPanelVisible)
{
    
    <div class="modal-backdrop" @onclick="HideModal" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 9999;">
    <div class="modal-content" @onclick:stopPropagation 
         style="background: rgb(0, 0, 0); padding: 20px; border-radius: 12px; border: 2px solid white; max-width: 500px; width: 90%; box-shadow: 0 10px 25px rgba(0,0,0,0.2);">
        
        <h3 style="text-align: center; font-size: 45px;">Panel @pannelNum</h3>
        
        <div class="modal-body" style="margin-top: 10px;">
            @ChildContent

            @* info *@
            <div style="">
                        <h1 style="font-size: 30px; "><u>Info</u></h1>
                        <p style="font-size: 20px;">Scans: @panelScans</p>
            </div>

            @* Issues *@
             <div style="">
                <h1 style="font-size: 30px; margin-bottom: 0.5cm;"><u>Issues</u></h1>
                @foreach(var s in CheckForPotentialIssuesWithPanel(Upload.Entries).Take(4)){
                if(!s.Equals("No issues detected with machines or readers.")){
                <div  style="display: flex; align-items: flex-start; gap: 20px; width: 12cm;">
                <img src="images/error.jpeg" alt="Error Img" width="35" height="35" style="">
                <h3 style="font-size: 17px; margin-bottom: 5%; margin-top: 1%;">@s</h3>
                </div>
                }
                else{
                    <div  style="display: flex; align-items: flex-start; gap: 20px; width: 12cm; margin-right: 10cm;">
                    <img src="images/check.png" alt="Error Img" width="35" height="35" style="">
                    <h3 style="font-size: 17px; margin-bottom: 5%; margin-top: 1%;">@s</h3>
                </div>
                }
            }
                        
            </div>

            @* Connected Readers *@
             <div style="">
                <h1 style="font-size: 30px;"><u>Connected Readers</u></h1>
                @foreach(string str in GetUniqueReaderDescs()){
                <button   @onclick="@(() => HandleButtonClick(str))" style="padding: 10px 20px; color: white; border: none; border-radius: 5px; font-size: 13px;">
                    • <u style="margin-left: 0.5cm;"> @str</u>

                   
              
                </button>
                }
                        
            </div>
            

        </div>
    </div>
    </div> 

}
@* Reader clicked pop up*@
@if (IsReaderVisible)
{
    
    <div class="modal-backdrop" @onclick="HideModal" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 9999;">
    <div class="modal-content" @onclick:stopPropagation 
         style="background: rgb(0, 0, 0); padding: 20px; border-radius: 12px; border: 2px solid white; max-width: 500px; width: 90%; box-shadow: 0 10px 25px rgba(0,0,0,0.2);">
        
        <h3 style="text-align: center; font-size: 30px;">@readerName</h3>
        
        <div class="modal-body" style="margin-top: 10px;">
            @ChildContent

            @* info *@
            <div style="">
                        <h1 style="font-size: 30px; "><u>Info</u></h1>
                        <p style="font-size: 20px;">Scans: @readerNum</p>
            </div>

            @* Issues *@
             <div style="">
                <h1 style="font-size: 30px; margin-bottom: 0.5cm;"><u>Issues</u></h1>
                @foreach(var s in CheckForPotentialIssuesWithReader(Upload.Entries).Take(4)){
                if(!s.Equals("No issues detected with machines or readers.")){
                <div  style="display: flex; align-items: flex-start; gap: 20px; width: 12cm;">
                <img src="images/error.jpeg" alt="Error Img" width="35" height="35" style="">
                <h3 style="font-size: 17px; margin-bottom: 5%; margin-top: 1%;">@s</h3>
                </div>
                }
                else{
                    <div  style="display: flex; align-items: flex-start; gap: 20px; width: 12cm; margin-right: 10cm;">
                    <img src="images/check.png" alt="Error Img" width="35" height="35" style="">
                    <h3 style="font-size: 17px; margin-bottom: 5%; margin-top: 1%;">@s</h3>
                </div>
                }
            }
                        
            </div>

            @* Connected Readers *@
             <div style="">
                <h1 style="font-size: 30px;"><u>Connected Panel</u></h1>
                @foreach(int i in GetUniquePannel()){
                <button   @onclick="@(() => OnPanelClick(i))" style="padding: 10px 20px; color: white; border: none; border-radius: 5px; font-size: 20px;">
                    • <u style="margin-left: 0.5cm;"> @i</u>

                   
              
                </button>
                }
                        
            </div>
            

        </div>
    </div>
    </div> 

}


 

@* Map*@
<div style="text-align: center; margin-top: 5px;">
    <img src="images/map1.jpeg" alt="OGE map" width="67%" height="50%" />
</div>




<style>
    body {
        background-color: black;
        color: white;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    input {
        color-scheme: dark;
    }

    .custom-checkbox input[type="checkbox"] {
        appearance: none;
        width: 20px;
        height: 20px;
        border: 2px solid #ccc;
        border-radius: 4px;
        cursor: pointer;
        margin-right: 5px;
        vertical-align: middle;
    }

    .custom-checkbox input[type="checkbox"]:checked {
        background-color: currentColor;
       
    }

    .panels-color input[type="checkbox"] {
        color: orange;
    }

    .main-color input[type="checkbox"]:checked {
        background: linear-gradient(to right, red 0% 33%, yellow 33% 66%, green 66% 100%);

    }

    .readers-color input[type="checkbox"]{
        color: purple;
    }

    .hotpoints-color input[type="checkbox"] {
        color: linear-gradient(90deg, red, orange, yellow, green, blue);
        
    }

    .hotpoints-color input[type="checkbox"]:checked {
        background: linear-gradient(90deg, red, orange, yellow, green, blue);
    }
</style>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">


@code {
    private bool panels = true;
    private bool readers = false;

    private bool maintenance  = false;
    private bool hotPoints = false;

    public static bool IsPanelVisible { get; set; }

    public static bool IsReaderVisible { get; set; }

   public static string readerName;

    public static RenderFragment ChildContent { get; set; }

    public static int pannelNum;
    public static int readerNum;

    public static int panelScans;


    public static List<string> panelIssues = new List<string>();

    public static List<int> panelReaders = new List<int>();

    private static int GetTopActivePanel()
{
    return Upload.Entries
        .GroupBy(e => e.Machine.ToString())
        .OrderByDescending(g => g.Count())
        .Select(g => int.Parse(g.Key)) // convert string back to int
        .FirstOrDefault();
}

    private static string GetTopActiveReader()
{
    return Upload.Entries
        .GroupBy(e => e.ReaderDesc) // or e.Reader.ToString() if needed
        .OrderByDescending(g => g.Count())
        .Select(g => g.Key)
        .FirstOrDefault();
}


    public static string scansToColorPanel(int i){
        
        return GetColor(GetPanelScanCount(i),GetPanelScanCount(GetTopActivePanel()));
    }

     public static string scansToColorReader(string str){
         return GetColor(GetReaderScanCount(str), GetReaderScanCount(GetTopActiveReader()));
    }

    public static string scansToColorPanelMaintenance(int i){
        
        return GetColorMaintenancePanel(GetPanelScanCount(i),Pages.Upload.SCAN_THRESHOLDForPannel , Upload.nearPannel);
    }

     public static string scansToColorReaderMaintenance(string str){
         return GetColorMaintenanceReader(str,GetReaderScanCount(str),Pages.Upload.SCAN_THRESHOLDForReader, Upload.nearReader);
    }

   private static string GetColor(int scans, int threshold)
{
    double ratio = Math.Clamp((double)scans / threshold, 0, 1);

    if (ratio >= 0.75)
    {
        // Red to Orange
        int r = 255;
        int g = (int)((1 - ratio) / 0.25 * 165); // 0 to 165
        int b = 0;
        return $"rgb({r}, {g}, {b})";
    }
    else if (ratio >= 0.5)
    {
        // Orange to Yellow
        int r = 255;
        int g = 165 + (int)((0.75 - ratio) / 0.25 * (255 - 165)); // 165 to 255
        int b = 0;
        return $"rgb({r}, {g}, {b})";
    }
    else if (ratio >= 0.25)
    {
        // Yellow to Green
        int r = (int)((0.5 - ratio) / 0.25 * 255); // 255 to 0
        int g = 255;
        int b = 0;
        return $"rgb({r}, {g}, {b})";
    }
    else
    {
        // Green to Blue
        int r = 0;
        int g = (int)(ratio / 0.25 * 255); // 0 to 255
        int b = 255 - (int)(ratio / 0.25 * 255); // 255 to 0
        return $"rgb({r}, {g}, {b})";
    }
}


private static string GetColorMaintenancePanel(int scans, int threshold , int near)
{
    if(scans >= threshold && Upload.PanelsOver){
        return "red";
    }
    else if(scans + near > threshold && Upload.PanelsNear){
        return "yellow";
    }
    else{
        return "green";
    }
}

private static string GetColorMaintenanceReader(string reader, int scans, int threshold, int near)
{
    if (Upload.ReadersOver && scans >= threshold)
        return "red";

    if (Upload.dupBool)
    {
        int duplicateCount = 0;

var relevantEntries = Upload.EntriesWithDups
    .Where(e => e.ReaderDesc == reader)
    .OrderBy(e => e.IDHash)
    .ThenBy(e => e.Time)
    .ToList();

for (int i = 1; i < relevantEntries.Count; i++)
{
    var prev = relevantEntries[i - 1];
    var curr = relevantEntries[i];

    if (prev.IDHash == curr.IDHash &&
        prev.DevID == curr.DevID &&
        prev.Machine == curr.Machine &&
        prev.Time == curr.Time) // Compare time strings directly
    {
        duplicateCount++;
    }
}

if (duplicateCount > Upload.dupMin)
{
    return "red";
}

    }

    if (Upload.ReadersNear && (scans + near > threshold))
        return "yellow";

    return "green";
}

   

    public static void OnPanelClick(int i)
    {
       
       pannelNum = i;
       panelScans = GetPanelScanCount(i);
       panelIssues.Clear();
       panelIssues.Add("No issues detected with machines or readers.");
       panelReaders.Clear();
       panelReaders.Add(4);

       IsReaderVisible = false;
       IsPanelVisible = true;

    }

     void HideModal()
{
    IsPanelVisible = false;
    IsReaderVisible = false;
    
    
}

public static int GetPanelScanCount(int machineId)
{
    return Upload.Entries
        .Where(e => e.Machine == machineId)  
        .Count();  
}

public static int GetReaderScanCount(string name)
{
    return Upload.Entries
        .Where(e => e.ReaderDesc == name)  
        .Count();  
}


private void HandleButtonClick(string message)
{
   
   
    readerName = message; 
    readerNum = GetReaderScanCount(readerName);
    IsPanelVisible = false;
    IsReaderVisible = true;
    
}


  

    public static List<string> GetUniqueReaderDescs()
{
    return Upload.Entries
        .Where(e => e.Machine == pannelNum)  
        .Select(e => e.ReaderDesc)               
        .Distinct()                              
        .ToList();                               
}

public static List<int> GetUniquePannel()
{
    return Upload.Entries
        .Where(e => e.ReaderDesc == readerName)  
        .Select(e => e.Machine)               
        .Distinct()                              
        .ToList();                               
}




public static List<string> CheckForPotentialIssuesWithPanel(List<Upload.ReaderEvent> entries)
{
    entries =  entries.Where(e => e.Machine == pannelNum).ToList();

    int SCAN_THRESHOLDForPannel = Upload.SCAN_THRESHOLDForPannel; 

    int nearPannel = Upload.nearPannel;

    @* int SCAN_THRESHOLDForReader = Upload.SCAN_THRESHOLDForReader; 
    int nearReader = Upload.nearReader;
    int closingTime = Upload.closeTime;

    int openingTime = Upload.openTime; *@

//Does not account for Day lights saving time and only works for UTE to CTE. Regular is +6 but its DST
    @* int openingTimeUtc = openingTime +  5;
    int closingTimeUtc = closingTime + 5 ;
    if(closingTimeUtc > 12){
        closingTimeUtc -= 12;
    } *@

    List<string> issues = new List<string>();

    @* var afterHours = entries
    .Where(e => 
    DateTime.Parse(e.Time).Hour < openingTimeUtc || DateTime.Parse(e.Time).Hour > closingTimeUtc)
    .Select(e => new { e.IDHash, e.Time, e.ReaderDesc })
    .ToList(); *@


   
    var machineIssuesOver = entries
        .GroupBy(e => e.Machine)  
        .Where(g => g.Count() >= SCAN_THRESHOLDForPannel)
        .Select(g => new { Machine = g.Key, Count = g.Count() })
        .ToList();

         var machineIssuesNear = entries
        .GroupBy(e => e.Machine)  
        .Where(g => g.Count() + nearPannel >= SCAN_THRESHOLDForPannel && g.Count() < SCAN_THRESHOLDForPannel)
        .Select(g => new { Machine = g.Key, Count = g.Count() })
        .ToList();


       



    if (machineIssuesOver.Any() && Upload.PanelsOver)
    {
        foreach (var issue in machineIssuesOver)
        {
            issues.Add($"Panel {issue.Machine} has {issue.Count} scans. Over threshold of {SCAN_THRESHOLDForPannel}");
        }
    }

   
@* 
     if (afterHours.Any() && Upload.afterHoursBool)
    {
        foreach (var scan in afterHours)
            {
                issues.Add($"{scan.IDHash.Substring(0,10)} scanned at {scan.ReaderDesc} at {scan.Time} — outside regular hours.");
            }
    } *@

    if (machineIssuesNear.Any() && Upload.PanelsNear)
    {
        foreach (var issue in machineIssuesNear)
        {
            issues.Add($"Panel {issue.Machine} : {issue.Count} scans. Near threshold of {SCAN_THRESHOLDForPannel}");
        }
    }

    


   
    if (!issues.Any())
    {
        issues.Add("No issues detected with machines or readers.");
    }

    return issues;
}


public static List<string> CheckForPotentialIssuesWithReader(List<Upload.ReaderEvent> entries)
{
    entries =  entries.Where(e => e.ReaderDesc == readerName).ToList();
    List<Upload.ReaderEvent> entriesWithDup = Upload.EntriesWithDups.Where(e => e.ReaderDesc == readerName).ToList();

    int SCAN_THRESHOLDForReader = Upload.SCAN_THRESHOLDForReader; 
    int nearReader = Upload.nearReader;
   


    List<string> issues = new List<string>();

    @* var afterHours = entries
    .Where(e => 
    DateTime.Parse(e.Time).Hour < openingTimeUtc || DateTime.Parse(e.Time).Hour > closingTimeUtc)
    .Select(e => new { e.IDHash, e.Time, e.ReaderDesc })
    .ToList(); *@



  
    
    var readerDescIssuesOver = entries
        .GroupBy(e => e.ReaderDesc)  
        .Where(g => g.Count() >= SCAN_THRESHOLDForReader)  
        .Select(g => new { ReaderDesc = g.Key, Count = g.Count() })
        .ToList();

        var readerDescIssuesNear = entries
        .GroupBy(e => e.ReaderDesc)  
        .Where(g => g.Count() + nearReader >= SCAN_THRESHOLDForReader && g.Count() < SCAN_THRESHOLDForReader)  
        .Select(g => new { ReaderDesc = g.Key, Count = g.Count() })
        .ToList();



     var duplicateScans = entriesWithDup
    .OrderBy(e => e.IDHash).ThenBy(e => e.Time)
    .GroupBy(e => e.IDHash)
    .SelectMany(group =>
        group.Zip(group.Skip(1), (a, b) => new
        {
            Prev = a,
            Curr = b,
            PrevTime = DateTime.Parse(a.Time),
            CurrTime = DateTime.Parse(b.Time)
        })
        .Where(pair =>
            pair.Prev.ReaderDesc == pair.Curr.ReaderDesc &&
            pair.Prev.IDHash == pair.Curr.IDHash &&
            pair.Prev.DevID == pair.Curr.DevID &&
            pair.Prev.Machine == pair.Curr.Machine &&
            pair.CurrTime == pair.PrevTime
        )
        .Select(pair => pair.Curr)
    )
    .GroupBy(d => d.ReaderDesc)
    .Where(g => g.Count() > Upload.dupMin)
    .SelectMany(g => g)
    .ToList();
       



     if (readerDescIssuesOver.Any() && Upload.ReadersOver)
    {
        foreach (var issue in readerDescIssuesOver)
        {
            issues.Add($"Reader {issue.ReaderDesc} : {issue.Count} scans. Over threshold of {SCAN_THRESHOLDForReader}");
        }
    }
@* 
     if (afterHours.Any() && Upload.afterHoursBool)
    {
        foreach (var scan in afterHours)
            {
                issues.Add($"{scan.IDHash.Substring(0,10)} scanned at {scan.ReaderDesc} at {scan.Time} — outside regular hours.");
            }
    } *@

    

    if (readerDescIssuesNear.Any() && Upload.ReadersNear)
    {
        foreach (var issue in readerDescIssuesNear)
        {
            issues.Add($"Reader {issue.ReaderDesc} : {issue.Count} scans. Near threshold of {SCAN_THRESHOLDForReader}");
        }
    }

    if (duplicateScans.Any() && Upload.dupBool)
{
    var groupedByReader = duplicateScans
        .GroupBy(d => d.ReaderDesc)
        .Select(g => new { ReaderDesc = g.Key, Count = g.Count() });

    foreach (var group in groupedByReader)
    {
        issues.Add($"{group.ReaderDesc} has {group.Count} duplicate scans.");
    }
}

   
    if (!issues.Any())
    {
        issues.Add("No issues detected with machines or readers.");
    }

    return issues;
}

}
